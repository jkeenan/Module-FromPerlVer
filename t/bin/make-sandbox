#!/bin/bash

cd "$(dirname $0)/..";

rm -rf sandbox;
mkdir  sandbox;

cd ./sandbox;

git init .;

echo '.git' > .gitignore;
git add .;
git commit -m'.gitignore';

for i in ../version/*; 
do
    (
        cd $i;
        find . | cpio -pdv ~-;
    );

    git add *;
    git tag "perl/$(basename $i)";
    git commit -m"$i";

    rm -rf *;

done

tar cvf .git.tar .git;

# push fake sandbox into module's git.
# .gitignore avoids issues with
# submodule.

cd ..;
git add sandbox;
git commit -m'minimal sandbox for t/2*';

exit 0;

